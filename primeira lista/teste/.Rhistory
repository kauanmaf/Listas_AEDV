grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(5,35)) +
theme_light() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1
temps.1812.plot <- ggplot(data = temps.nice, aes(x = long, y = temp)) +
geom_line() +
geom_label(aes(label = nice.label),
family = "Open Sans Condensed Bold", size = 2.5) +
labs(x = NULL, y = "° Celsius") +
scale_x_continuous(limits = ggplot_build(march.1812.plot)$layout$panel_ranges[[1]]$x.range) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35, 5)) +  # Add some space above/below
theme_bw(base_family = "Open Sans Condensed Light") +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
temps.1812.plot
temps.1812.plot <- ggplot(data = temps.nice, aes(x = long, y = temp)) +
geom_line() +
geom_label(aes(label = nice.label)) +
labs(x = NULL, y = "° Celsius") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35, 5)) +  # Add some space above/below
theme_light() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
temps.1812.plot
```{r}
grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35,5)) +
theme_light() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1
grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35,5)) +
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35,5)) +
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1
temperatura
grid::grid.draw(ambos_os_gráficos)
View(cities)
ambos_os_gráficos <- rbind(ggplotGrob(march.1812.plot),
ggplotGrob(grafico1))
grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35,5)) +
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1
ambos_os_gráficos <- rbind(ggplotGrob(march.1812.plot),
ggplotGrob(grafico1))
library(tidyverse)
library(lubridate)
library(ggmap)
library(ggrepel)
library(gridExtra)
library(pander)
cities <- read.table("input/minard/cities.txt",
header = TRUE, stringsAsFactors = FALSE)
library(tidyverse)
library(lubridate)
library(ggmap)
library(ggrepel)
library(gridExtra)
library(pander)
cities <- read.table("fancy-minard-master/input/minard/cities.txt",
header = TRUE, stringsAsFactors = FALSE)
troops <- read.table("fancy-minard-master/input/minard/troops.txt",
header = TRUE, stringsAsFactors = FALSE)
temps <- read.table("fancy-minard-master/input/minard/temps.txt",
header = TRUE, stringsAsFactors = FALSE) %>%
mutate(date = dmy(date))  # Convert string to actual date
troops %>% head() %>% pandoc.table()
ggplot() +
geom_path(data = troops, aes(x = long, y = lat, group = group,
color = direction, size = survivors),
lineend = "round") +
geom_point(data = cities, aes(x = long, y = lat),
color = "#DC5B44") +
geom_text_repel(data = cities, aes(x = long, y = lat, label = city),
color = "#DC5B44", family = "Open Sans Condensed Bold") +
scale_size(range = c(0.5, 15)) +
scale_colour_manual(values = c("#DFC17E", "#252523")) +
labs(x = NULL, y = NULL) +
guides(color = FALSE, size = FALSE)
ggplot() +
geom_path(data = troops, aes(x = long, y = lat, group = group,
color = direction, size = survivors),
lineend = "round") +
geom_point(data = cities, aes(x = long, y = lat),
color = "#DC5B44") +
geom_text_repel(data = cities, aes(x = long, y = lat, label = city),
color = "#DC5B44") +
scale_size(range = c(0.5, 15)) +
scale_colour_manual(values = c("#DFC17E", "#252523")) +
labs(x = NULL, y = NULL) +
guides(color = FALSE, size = FALSE)
march.1812.ne.europe <- c(left = 23.5, bottom = 53.4, right = 38.1, top = 56.3)
march.1812.ne.europe.map <- get_stamenmap(bbox = march.1812.ne.europe, zoom = 8,
maptype = "terrain-background", where = "cache")
march.1812.plot <- ggmap(march.1812.ne.europe.map) +
geom_path(data = troops, aes(x = long, y = lat, group = group,
color = direction, size = survivors),
lineend = "round") +
geom_point(data = cities, aes(x = long, y = lat),
color = "#DC5B44") +
geom_text_repel(data = cities, aes(x = long, y = lat, label = city),
color = "#DC5B44", family = "Open Sans Condensed Bold") +
scale_size(range = c(0.5, 10)) +
scale_colour_manual(values = c("#DFC17E", "#252523")) +
guides(color = FALSE, size = FALSE) +
theme_nothing()
march.1812.plot
temps.nice <- temps %>%
mutate(nice.label = paste0(temp, "°, ", month, ". ", day))
temps.1812.plot <- ggplot(data = temps.nice, aes(x = long, y = temp)) +
geom_line() +
geom_label(aes(label = nice.label),
family = "Open Sans Condensed Bold", size = 2.5) +
labs(x = NULL, y = "° Celsius") +
scale_x_continuous(limits = ggplot_build(march.1812.plot)$layout$panel_ranges[[1]]$x.range) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35, 5)) +  # Add some space above/below
theme_bw(base_family = "Open Sans Condensed Light") +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
temps.1812.plot
march.1812.ne.europe <- c(left = 23.5, bottom = 53.4, right = 38.1, top = 56.3)
march.1812.ne.europe.map <- get_stamenmap(bbox = march.1812.ne.europe, zoom = 8,
maptype = "terrain-background", where = "cache")
march.1812.plot <- ggmap(march.1812.ne.europe.map) +
geom_path(data = troops, aes(x = long, y = lat, group = group,
color = direction, size = survivors),
lineend = "round") +
geom_point(data = cities, aes(x = long, y = lat),
color = "#DC5B44") +
geom_text_repel(data = cities, aes(x = long, y = lat, label = city),
color = "#DC5B44") +
scale_size(range = c(0.5, 10)) +
scale_colour_manual(values = c("#DFC17E", "#252523")) +
guides(color = FALSE, size = FALSE) +
theme_nothing()
march.1812.plot
march.1812.ne.europe <- c(left = 23.5, bottom = 53.4, right = 38.1, top = 56.3)
march.1812.ne.europe.map <- get_stamenmap(bbox = march.1812.ne.europe, zoom = 8,
maptype = "terrain-background", where = "cache")
march.1812.plot <- ggmap(march.1812.ne.europe.map) +
geom_path(data = troops, aes(x = long, y = lat, group = group,
color = direction, size = survivors),
lineend = "round") +
geom_point(data = cities, aes(x = long, y = lat),
color = "#DC5B44") +
geom_text_repel(data = cities, aes(x = long, y = lat, label = city),
color = "#DC5B44") +
scale_size(range = c(0.5, 10)) +
scale_colour_manual(values = c("#DFC17E", "#252523")) +
guides(color = FALSE, size = FALSE) +
theme_nothing()
march.1812.plot
temps.1812.plot <- ggplot(data = temps.nice, aes(x = long, y = temp)) +
geom_line() +
geom_label(aes(label = nice.label)) +
labs(x = NULL, y = "° Celsius") +
scale_x_continuous(limits = ggplot_build(march.1812.plot)$layout$panel_ranges[[1]]$x.range) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35, 5)) +  # Add some space above/below
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
temps.nice <- temps %>%
mutate(nice.label = paste0(temp, "°, ", month, ". ", day))
temps.1812.plot <- ggplot(data = temps.nice, aes(x = long, y = temp)) +
geom_line() +
geom_label(aes(label = nice.label)) +
labs(x = NULL, y = "° Celsius") +
scale_x_continuous(limits = ggplot_build(march.1812.plot)$layout$panel_ranges[[1]]$x.range) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35, 5)) +  # Add some space above/below
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
temps.1812.plot
both.1812.plot$heights[panels] <- unit(c(map.panel.height, 0.1), "null")
both.1812.plot <- rbind(ggplotGrob(march.1812.plot),
ggplotGrob(temps.1812.plot))
grid::grid.newpage()
grid::grid.draw(both.1812.plot)
# Identify which layout elements are panels
panels <- both.1812.plot$layout$t[grep("panel", both.1812.plot$layout$name)]
# Normally we can pass a vector of null units that represent relative heights.
# For instance, `unit(c(3, 1), "null")` would make the top panel 3 times as
# tall as the bottom.
# But, the map here uses coord_equal() to show the correct dimensions of the
# map, and this messes with the panel height for whatever reason. So instead,
# we extract the original map panel height, which is really small, and then
# make the bottom panel smaller in the same scale.
map.panel.height <- both.1812.plot$heights[panels][1]
# See, super small
map.panel.height
# Apply new panel heights to object
both.1812.plot$heights[panels] <- unit(c(map.panel.height, 0.1), "null")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(message=FALSE, warnings=FALSE)
library(tidyverse)
library(lubridate)
library(lubridate)
library(ggmap)
library(ggrepel)
library(gridExtra)
library(pander)
#Há uma sobreposição de funções, mas como não iremos utiliza-las, vamos ignorar
#setwd("C:/Users/kauan/OneDrive - Fundacao Getulio Vargas - FGV/Matérias/AEDV/teste")
cities <- read.table("fancy-minard-master/input/minard/cities.txt",
header = TRUE,
stringsAsFactors = FALSE)
troops <- read.table("fancy-minard-master/input/minard/troops.txt",
header = TRUE,
stringsAsFactors = FALSE)
temps <- read.table("fancy-minard-master/input/minard/temps.txt",
header = TRUE, stringsAsFactors = FALSE) %>%
mutate(date = dmy(date))
troops %>% head() %>% pandoc.table()
ggplot(data = troops, mapping = aes(x = long, y = lat, group = group)) + geom_path()
ggplot(data = troops, mapping = aes(x = long, y = lat,
group = group, color=direction, linewidth = survivors)) + geom_path(lineend = "round")
graf_1 <- ggplot(data = troops, mapping = aes(x = long, y = lat, group = group, color=direction, linewidth = survivors)) +
geom_path(lineend = "round") +
scale_size(range = c(0.5,5)) +
scale_color_manual(values = c("#DFC17E", "#252523")) +
labs(x = NULL, y = NULL) +
guides(color = "none")
graf_1
ggplot() +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color=direction,
linewidth = survivors,
), lineend = "round") +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "red", family = "sans") +
scale_size(range = c(0.5,5)) +
scale_color_manual(values = c("#DFC17E", "#252523")) +
labs(x = NULL, y = NULL) +
guides(color = "none")
march.1812.europe <- c(left = 20.039, top = 56.656, right = 39.507, bottom = 52.324)
march.1812.europe.map <- get_stamenmap(bbox = march.1812.europe, zoom = 5, maptype = "toner-background", where = "cache")
ggmap(march.1812.europe.map)
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white"))
march.1812.plot
p_temp <- ggplot(data = temps,
mapping = aes(x = long, y = temp))
p_temp +geom_line() + geom_text(aes(label = temp), vjust = 1.5)
temps.nice <- temps %>%
mutate(nice.label = paste0(temp, "°, ", month, ". ", day))
grafico1 <-  ggplot(data = temps.nice, mapping = aes(x=long, y= temp)) +
geom_line() +
geom_label(mapping = aes(label = nice.label)) +
labs(x = NULL, y = "°C") +
scale_x_continuous(limits = c(20.0, 39.5)) +
scale_y_continuous(position = "right") +
coord_cartesian(ylim = c(-35,5)) +
theme_bw() +
theme(panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
axis.text.x = element_blank(), axis.ticks = element_blank(),
panel.border = element_blank())
grafico1
ambos_os_gráficos <- rbind(ggplotGrob(march.1812.plot),
ggplotGrob(grafico1))
grid.arrange(march.1812.plot, grafico1)
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank())
march.1812.plot
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank(),
plot.caption = "bottom")
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank(),
plot.caption = "bottom")
march.1812.plot
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank())
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank())
march.1812.plot
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank(),
legend.position = "bottom")
march.1812.plot <- ggmap(march.1812.europe.map) +
geom_path(data = troops,
mapping = aes(x = long,
y = lat,
group = group,
color = direction,
linewidth = survivors),
lineend = "round") +
scale_color_manual(values = c("#08995B", "#A900E6")) +
geom_point(data = cities, mapping = aes(x = long, y = lat)) +
geom_text_repel(data = cities, mapping = aes(x = long, y = lat, label = city), color = "black", family = "sans") +
scale_size(range = c(0.5,4)) +
guides(color = "none", size = "none") +
labs(title = "Marcha das tropas de Napoleão à Russia",
subtitle = "Este gráfico mostra como a grande armada de Napoleão foi quase
exterminada em sua tentativa de invadir a Rússia") +
theme(plot.title = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
axis.text = element_blank(),
axis.title = element_blank(),
legend.position = "bottom")
march.1812.plot
grid.arrange(march.1812.plot, grafico1)
combinado <- grid.arrange(march.1812.plot, grafico1)
combinado
combinado
View(combinado)
View(combinado)
View(combinado)
